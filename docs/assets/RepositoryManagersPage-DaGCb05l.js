import{C as p,o as h,d as y,w as u,b as c,e as t,M,A as x,H as C,I as $,J as k}from"./index-B834FtM9.js";import{s as D,a as S,b as T,c as V,d as A}from"./dialog.esm-CwB6jNdh.js";import{s as B,f as E}from"./axios-o2DBmFyx.js";const I={class:"p-fluid"},U={class:"p-field"},H=c("label",{for:"emailInput"},"Email",-1),N={class:"p-dialog-footer"},P={__name:"CreateRepositoryManagerDialog",emits:["createEvent"],setup(n,{expose:s,emit:r}){const a=p(!1),e=p(""),l=r,o=()=>{a.value=!0},m=()=>{a.value=!1,e.value=""},_=()=>{e.value&&(l("createEvent",e.value),a.value=!1,e.value="")};return s({show:o}),(b,i)=>{const v=B,f=M,g=D;return h(),y(g,{visible:a.value,"onUpdate:visible":i[1]||(i[1]=d=>a.value=d),header:"Add Repository Manager",style:{width:"25rem"}},{default:u(()=>[c("div",I,[c("div",U,[H,t(v,{id:"emailInput",modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=d=>e.value=d)},null,8,["modelValue"])])]),c("div",N,[t(f,{label:"Cancel",class:"p-button-text",onClick:m}),t(f,{label:"Add",disabled:!e.value,onClick:_},null,8,["disabled"])])]),_:1},8,["visible"])}}},j=x("repositoryManagers",()=>{const n=p([]);function s(e){const l=n.value;l.some(o=>o.email===e.email)||l.push(e)}function r(e){const l=new Set(e.map(o=>o.email));n.value=n.value.filter(o=>!l.has(o.email))}async function a(){const e=await E.get("/test/rm.json");n.value=e.data.repositoryManagers}return{repositoryManagers:n,add:s,remove:r,fetchRepositoryManagers:a}}),J=c("h1",null,"Repository managers",-1),K={class:"flex flex-row gap-2 mb-5"},G={__name:"RepositoryManagersPage",setup(n){const s=j(),r=p(null),a=p([]),e=()=>{r.value.show()},l=m=>{s.add({id:self.crypto.randomUUID(),email:m})},o=()=>{s.remove(a.value),a.value.length=0};return C(async()=>{await s.fetchRepositoryManagers()}),(m,_)=>{const b=P,i=M,v=S,f=T,g=V,d=A,w=$;return h(),y(w,null,{default:u(()=>[t(b,{ref_key:"dialog",ref:r,onCreateEvent:l},null,512),J,t(d,null,{default:u(()=>[t(g,{header:"All managers"},{default:u(()=>[c("div",K,[t(i,{label:"Add",icon:"pi pi-user-plus",onClick:e}),t(i,{label:"Remove",icon:"pi pi-trash",onClick:o,severity:"danger",disabled:!a.value||!a.value.length},null,8,["disabled"])]),t(f,{value:k(s).repositoryManagers,selection:a.value,"onUpdate:selection":_[0]||(_[0]=R=>a.value=R),dataKey:"id",stripedRows:"",tableStyle:"min-width: 50rem",scrollable:"",scrollHeight:"calc(100vh - 280px)"},{default:u(()=>[t(v,{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(v,{field:"email",header:"Email",sortable:""})]),_:1},8,["value","selection"])]),_:1})]),_:1})]),_:1})}}};export{G as default};
