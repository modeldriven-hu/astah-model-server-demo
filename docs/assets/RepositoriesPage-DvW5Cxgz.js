import{a as D,b as V,s as $,c as T}from"./tabpanel.esm-7PRMksuN.js";import{v as x,o as R,a as w,w as s,h as e,C as B,E as S,d as l,n as C,k as b,l as U,J as h}from"./index-BRUe-yBr.js";import{u as g}from"./RepositoriesStore-BDJ0e8Wa.js";import{s as F}from"./dialog.esm-BzAGbGdv.js";import{s as L}from"./dropdown.esm-BkonScTA.js";import"./index.esm-DmcMOcLX.js";import"./axios-Cm0UX6qg.js";const M={class:"flex flex-row gap-2"},A={__name:"RepositoryListTable",props:{repositories:Array},setup(y){const i=g(),_=t=>{const c=new Date(t.lastModified);return new Intl.DateTimeFormat(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}).format(c)},n=t=>{i.invertFavorite(t)},a=t=>t?"pi pi-star-fill":"pi pi-star";return(t,c)=>{const r=D,p=C,d=x("router-link"),u=V;return R(),w(u,{value:y.repositories,dataKey:"id",stripedRows:"",tableStyle:"min-width: 50rem",scrollable:"",scrollHeight:"calc(100vh - 280px)"},{default:s(()=>[e(r,{field:"name",header:"Name",sortable:""}),e(r,{field:"version",header:"Version"}),e(r,{field:"uploader",header:"Uploader",sortable:""}),e(r,{field:"lastModified",header:"Last modified",sortable:""},{body:s(o=>[B(S(_(o.data)),1)]),_:1}),e(r,{field:"actions",header:"Actions"},{body:s(({data:o})=>[l("div",M,[e(d,{to:"/repository/"+o.id+"/view"},{default:s(()=>[e(p,{label:"View",icon:"pi pi-desktop"})]),_:2},1032,["to"]),e(p,{label:"Favorite",icon:a(o.favorite),onClick:m=>n(o.id)},null,8,["icon","onClick"]),e(d,{to:"/repository/"+o.id},{default:s(()=>[e(p,{label:"Configure",icon:"pi pi-pencil"})]),_:2},1032,["to"])])]),_:1})]),_:1},8,["value"])}}},E={class:"p-fluid"},I={class:"p-field"},N=l("label",{for:"name"},"Repository name",-1),O={class:"p-field"},P=l("label",{for:"email"},"Owner",-1),H={class:"p-dialog-footer"},J={__name:"CreateRepositoryDialog",emits:["createEvent"],setup(y,{expose:i,emit:_}){const n=b(!1),a=b(""),t=b(""),c=_,r=()=>{n.value=!0},p=()=>{n.value=!1,t.value="",a.value=""},d=()=>{t.value&&a.value&&(c("createEvent",a.value,t.value),n.value=!1,t.value="",a.value="")};return i({show:r}),(u,o)=>{const m=L,v=C,k=F;return R(),w(k,{visible:n.value,"onUpdate:visible":o[2]||(o[2]=f=>n.value=f),header:"Create Repository",style:{width:"25rem"}},{default:s(()=>[l("div",E,[l("div",I,[N,e(m,{id:"name",modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=f=>a.value=f)},null,8,["modelValue"])]),l("div",O,[P,e(m,{id:"email",modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=f=>t.value=f)},null,8,["modelValue"])])]),l("div",H,[e(v,{label:"Cancel",class:"p-button-text",onClick:p}),e(v,{label:"Create",disabled:!t.value&&!a.value,onClick:d},null,8,["disabled"])])]),_:1},8,["visible"])}}},K=l("h1",null,"Repositories",-1),j={class:"flex flex-row gap-2 mb-5"},Z={__name:"RepositoriesPage",setup(y){const i=g(),_=b(null),n=()=>{_.value.show()},a=(c,r)=>{i.createRepository({id:crypto.randomUUID(),version:"1",name:c,owner:r})},t=()=>{i.fetchRepositories()};return U(async()=>{await i.fetchRepositories()}),(c,r)=>{const p=J,d=C,u=A,o=$,m=T,v=x("MainLayout");return R(),w(v,null,{default:s(()=>[K,e(m,null,{default:s(()=>[e(o,{header:"All repositories"},{default:s(()=>[e(p,{ref_key:"createRepositoryDialog",ref:_,onCreateEvent:a},null,512),l("div",j,[e(d,{label:"Add",icon:"pi pi-database",onClick:n}),e(d,{label:"Refresh",icon:"pi pi-refresh",onClick:t})]),e(u,{repositories:h(i).allRepositories},null,8,["repositories"])]),_:1}),e(o,{header:"Favorites"},{default:s(()=>[e(u,{repositories:h(i).favoriteRepositories},null,8,["repositories"])]),_:1}),e(o,{header:"Owned Repositories"},{default:s(()=>[e(u,{repositories:h(i).ownedRepositories},null,8,["repositories"])]),_:1}),e(o,{header:"Shared with me"},{default:s(()=>[e(u,{repositories:h(i).sharedRepositories},null,8,["repositories"])]),_:1})]),_:1})]),_:1})}}};export{Z as default};
