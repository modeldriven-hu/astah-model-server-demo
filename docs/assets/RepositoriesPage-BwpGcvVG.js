import{a as D,b as V,s as $,c as T,d as B}from"./dialog.esm-CFNFig2j.js";import{n as g,o as R,a as w,w as s,g as e,y as S,z as U,d as l,j as C,E as b,I as F,J as h}from"./index-BqvE5ap6.js";import{u as x}from"./RepositoriesStore-DGkIFid6.js";import{s as I}from"./axios-wRHvC6Go.js";import"./index.esm-B5wNrobB.js";const L={class:"flex flex-row gap-2"},M={__name:"RepositoryListTable",props:{repositories:Array},setup(y){const i=x(),_=t=>{const c=new Date(t.lastModified);return new Intl.DateTimeFormat(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}).format(c)},n=t=>{i.invertFavorite(t)},a=t=>t?"pi pi-star-fill":"pi pi-star";return(t,c)=>{const r=D,p=C,d=g("router-link"),u=V;return R(),w(u,{value:y.repositories,dataKey:"id",stripedRows:"",tableStyle:"min-width: 50rem",scrollable:"",scrollHeight:"calc(100vh - 280px)"},{default:s(()=>[e(r,{field:"name",header:"Name",sortable:""}),e(r,{field:"version",header:"Version"}),e(r,{field:"uploader",header:"Uploader",sortable:""}),e(r,{field:"lastModified",header:"Last modified",sortable:""},{body:s(o=>[S(U(_(o.data)),1)]),_:1}),e(r,{field:"actions",header:"Actions"},{body:s(({data:o})=>[l("div",L,[e(d,{to:"/repository/"+o.id+"/view"},{default:s(()=>[e(p,{label:"View",icon:"pi pi-desktop"})]),_:2},1032,["to"]),e(p,{label:"Favorite",icon:a(o.favorite),onClick:m=>n(o.id)},null,8,["icon","onClick"]),e(d,{to:"/repository/"+o.id},{default:s(()=>[e(p,{label:"Configure",icon:"pi pi-pencil"})]),_:2},1032,["to"])])]),_:1})]),_:1},8,["value"])}}},A={class:"p-fluid"},E={class:"p-field"},N=l("label",{for:"name"},"Repository name",-1),O={class:"p-field"},P=l("label",{for:"email"},"Owner",-1),j={class:"p-dialog-footer"},z={__name:"CreateRepositoryDialog",emits:["createEvent"],setup(y,{expose:i,emit:_}){const n=b(!1),a=b(""),t=b(""),c=_,r=()=>{n.value=!0},p=()=>{n.value=!1,t.value="",a.value=""},d=()=>{t.value&&a.value&&(c("createEvent",a.value,t.value),n.value=!1,t.value="",a.value="")};return i({show:r}),(u,o)=>{const m=I,v=C,k=$;return R(),w(k,{visible:n.value,"onUpdate:visible":o[2]||(o[2]=f=>n.value=f),header:"Create Repository",style:{width:"25rem"}},{default:s(()=>[l("div",A,[l("div",E,[N,e(m,{id:"name",modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=f=>a.value=f)},null,8,["modelValue"])]),l("div",O,[P,e(m,{id:"email",modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=f=>t.value=f)},null,8,["modelValue"])])]),l("div",j,[e(v,{label:"Cancel",class:"p-button-text",onClick:p}),e(v,{label:"Create",disabled:!t.value&&!a.value,onClick:d},null,8,["disabled"])])]),_:1},8,["visible"])}}},H=l("h1",null,"Repositories",-1),J={class:"flex flex-row gap-2 mb-5"},X={__name:"RepositoriesPage",setup(y){const i=x(),_=b(null),n=()=>{_.value.show()},a=(c,r)=>{i.createRepository({id:crypto.randomUUID(),version:"1",name:c,owner:r})},t=()=>{i.fetchRepositories()};return F(async()=>{await i.fetchRepositories()}),(c,r)=>{const p=z,d=C,u=M,o=T,m=B,v=g("MainLayout");return R(),w(v,null,{default:s(()=>[H,e(m,null,{default:s(()=>[e(o,{header:"All repositories"},{default:s(()=>[e(p,{ref_key:"createRepositoryDialog",ref:_,onCreateEvent:a},null,512),l("div",J,[e(d,{label:"Add",icon:"pi pi-database",onClick:n}),e(d,{label:"Refresh",icon:"pi pi-refresh",onClick:t})]),e(u,{repositories:h(i).allRepositories},null,8,["repositories"])]),_:1}),e(o,{header:"Favorites"},{default:s(()=>[e(u,{repositories:h(i).favoriteRepositories},null,8,["repositories"])]),_:1}),e(o,{header:"Owned Repositories"},{default:s(()=>[e(u,{repositories:h(i).ownedRepositories},null,8,["repositories"])]),_:1}),e(o,{header:"Shared with me"},{default:s(()=>[e(u,{repositories:h(i).sharedRepositories},null,8,["repositories"])]),_:1})]),_:1})]),_:1})}}};export{X as default};
