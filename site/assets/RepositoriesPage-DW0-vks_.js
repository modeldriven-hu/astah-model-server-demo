import{r as D,o as y,d as w,w as s,e,t as V,v as $,b as c,M as R,C as b,H as k,I as T,J as v}from"./index-B834FtM9.js";import{a as B,b as S,s as U,c as F,d as I}from"./dialog.esm-CwB6jNdh.js";import{u as g}from"./RepositoriesStore-DARnWSZ5.js";import{s as M}from"./axios-o2DBmFyx.js";const A={class:"flex flex-row gap-2"},N={__name:"RepositoryListTable",props:{repositories:Array},setup(h){const a=g(),_=o=>{const p=new Date(o.lastModified);return new Intl.DateTimeFormat(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}).format(p)},r=o=>{a.invertFavorite(o)},i=o=>o?"pi pi-star-fill":"pi pi-star";return(o,p)=>{const n=B,d=R,l=D("router-link"),u=S;return y(),w(u,{value:h.repositories,dataKey:"id",stripedRows:"",tableStyle:"min-width: 50rem",scrollable:"",scrollHeight:"calc(100vh - 280px)"},{default:s(()=>[e(n,{field:"name",header:"Name",sortable:""}),e(n,{field:"version",header:"Version"}),e(n,{field:"uploader",header:"Uploader",sortable:""}),e(n,{field:"lastModified",header:"Last modified",sortable:""},{body:s(t=>[V($(_(t.data)),1)]),_:1}),e(n,{field:"actions",header:"Actions"},{body:s(({data:t})=>[c("div",A,[e(l,{to:"/repository/"+t.id+"/view"},{default:s(()=>[e(d,{label:"View",icon:"pi pi-desktop"})]),_:2},1032,["to"]),e(d,{label:"Favorite",icon:i(t.favorite),onClick:m=>r(t.id)},null,8,["icon","onClick"]),e(l,{to:"/repository/"+t.id},{default:s(()=>[e(d,{label:"Configure",icon:"pi pi-pencil"})]),_:2},1032,["to"])])]),_:1})]),_:1},8,["value"])}}},E={class:"p-fluid"},L={class:"p-field"},H=c("label",{for:"name"},"Repository name",-1),O={class:"p-field"},P=c("label",{for:"email"},"Owner",-1),J={class:"p-dialog-footer"},K={__name:"CreateRepositoryDialog",emits:["createEvent"],setup(h,{expose:a,emit:_}){const r=b(!1),i=b(""),o=b(""),p=_,n=()=>{r.value=!0},d=()=>{r.value=!1,o.value="",i.value=""},l=()=>{o.value&&i.value&&(p("createEvent",i.value,o.value),r.value=!1,o.value="",i.value="")};return a({show:n}),(u,t)=>{const m=M,C=R,x=U;return y(),w(x,{visible:r.value,"onUpdate:visible":t[2]||(t[2]=f=>r.value=f),header:"Create Repository",style:{width:"25rem"}},{default:s(()=>[c("div",E,[c("div",L,[H,e(m,{id:"name",modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=f=>i.value=f)},null,8,["modelValue"])]),c("div",O,[P,e(m,{id:"email",modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=f=>o.value=f)},null,8,["modelValue"])])]),c("div",J,[e(C,{label:"Cancel",class:"p-button-text",onClick:d}),e(C,{label:"Create",disabled:!o.value&&!i.value,onClick:l},null,8,["disabled"])])]),_:1},8,["visible"])}}},j=c("h1",null,"Repositories",-1),q={class:"flex flex-row gap-2 mb-5"},X={__name:"RepositoriesPage",setup(h){const a=g(),_=b(null),r=()=>{_.value.show()},i=(o,p)=>{a.createRepository({id:crypto.randomUUID(),version:"1",name:o,owner:p})};return k(async()=>{await a.fetchRepositories()}),(o,p)=>{const n=K,d=R,l=N,u=F,t=I,m=T;return y(),w(m,null,{default:s(()=>[j,e(t,null,{default:s(()=>[e(u,{header:"All repositories"},{default:s(()=>[e(n,{ref_key:"createRepositoryDialog",ref:_,onCreateEvent:i},null,512),c("div",q,[e(d,{label:"Add",icon:"pi pi-database",onClick:r})]),e(l,{repositories:v(a).allRepositories},null,8,["repositories"])]),_:1}),e(u,{header:"Favorites"},{default:s(()=>[e(l,{repositories:v(a).favoriteRepositories},null,8,["repositories"])]),_:1}),e(u,{header:"Owned Repositories"},{default:s(()=>[e(l,{repositories:v(a).ownedRepositories},null,8,["repositories"])]),_:1}),e(u,{header:"Shared with me"},{default:s(()=>[e(l,{repositories:v(a).sharedRepositories},null,8,["repositories"])]),_:1})]),_:1})]),_:1})}}};export{X as default};
